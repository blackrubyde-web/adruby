const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SpendRevenueChart-8dkj1sJI.js","assets/vendor-react-BtVdps6C.js","assets/vendor-Cwcl6ryW.js","assets/vendor-radix-BA32w1ww.js","assets/vendor-charts-KPNNdnYR.js","assets/RoasMiniChart-8XA5GSZW.js"])))=>i.map(i=>d[i]);
import{_ as M}from"./index-BgLObszc.js";import{r as a,j as e,aV as J,aG as E,a7 as k,a6 as T,e as D,aE as W,bk as Y,bl as Z,aW as q,bm as Q,aB as O,D as X,bn as ee}from"./vendor-react-BtVdps6C.js";import{f as se}from"./vendor-Cwcl6ryW.js";import{a as re}from"./apiClient-Xod5JFW7.js";import{P as te}from"./PageShell-BcTt0uJw.js";import{H as ie}from"./HeroHeader-D_79mwMf.js";import{C as ne}from"./Card-BkrgSx6M.js";import{C}from"./Chip-BZQq5WZ-.js";import"./creative-C4rWjoa1.js";import"./vendor-supabase-CX3WxO18.js";import"./vendor-radix-BA32w1ww.js";function ae(t,i){const[j,c]=a.useState(null),[v,s]=a.useState(!0),[u,m]=a.useState(null);return a.useEffect(()=>{let l=!1;const h=`overview:${t}:${i}`,b=1e3*60*5;let d=!1;try{const o=sessionStorage.getItem(h);if(o){const n=JSON.parse(o);n!=null&&n.ts&&Date.now()-n.ts<b&&n.data&&(d=!0,c(n.data),m(null))}}catch{d=!1}return s(!d),m(null),re.get(`/api/overview?range=${t}&channel=${i}`).then(o=>{if(!l){c(o);try{sessionStorage.setItem(h,JSON.stringify({ts:Date.now(),data:o}))}catch{}}}).catch(o=>{l||(m((o==null?void 0:o.message)??"Failed to load"),d||c(null))}).finally(()=>{l||s(!1)}),()=>{l=!0}},[t,i]),{data:j,loading:v,error:u}}const oe=a.lazy(()=>M(()=>import("./SpendRevenueChart-8dkj1sJI.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.SpendRevenueChart}))),le=a.lazy(()=>M(()=>import("./RoasMiniChart-8XA5GSZW.js"),__vite__mapDeps([5,1,2,3,4])).then(t=>({default:t.RoasMiniChart})));function I({title:t}){return e.jsx("div",{className:"h-[280px] rounded-2xl border border-border/60 bg-muted/30 animate-pulse flex items-center justify-center",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:t})})}function ve({onNavigate:t}){var P,R,$;const[i,j]=a.useState("7d"),[c,v]=a.useState("meta"),{data:s,loading:u,error:m}=ae(i,c),[l,h]=a.useState([{id:"connect-meta",title:"Connect Meta Ads account",description:"Link your Facebook Business account to import campaigns",completed:!1,actionLabel:"Connect",onAction:()=>{t("settings",{tab:"integrations"})}},{id:"create-campaign",title:"Create your first campaign",description:"Launch a campaign to start getting results",completed:!1,actionLabel:"Create",onAction:()=>{t("adbuilder")}},{id:"generate-creatives",title:"Generate AI ad creatives",description:"Use AI to create high-performing ad variations",completed:!1,actionLabel:"Generate",onAction:()=>{t("creative-builder")}},{id:"enable-optimization",title:"Enable AI optimization rules",description:"Let AI automatically optimize your campaigns",completed:!1,actionLabel:"Enable",onAction:()=>{t("strategies")}}]);a.useEffect(()=>{var r,p;(p=(r=s==null?void 0:s.onboarding)==null?void 0:r.steps)!=null&&p.length&&h(L=>L.map(w=>{const F=s.onboarding.steps.find(K=>K.id===w.id);return F?{...w,completed:F.completed}:w}))},[(P=s==null?void 0:s.onboarding)==null?void 0:P.steps]);const b=l.filter(r=>r.completed).length,d=l.length,o=b/d*100,n=r=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(r),G=r=>new Intl.NumberFormat("de-DE",{notation:"compact",maximumFractionDigits:1}).format(r),N=(r,p="%")=>r==null||Number.isNaN(r)?"—":`${r>0?"+":""}${r.toFixed(1)}${p}`,H=[{label:"Total Spend",value:n((s==null?void 0:s.kpis.spend)??0),change:N(s==null?void 0:s.kpis.spendChangePct),isPositive:((s==null?void 0:s.kpis.spendChangePct)??0)<=0,comparison:`vs last ${i}`,icon:e.jsx(J,{className:"w-5 h-5 text-primary"})},{label:"Total Revenue",value:n((s==null?void 0:s.kpis.revenue)??0),change:N(s==null?void 0:s.kpis.revenueChangePct),isPositive:((s==null?void 0:s.kpis.revenueChangePct)??0)>=0,comparison:`vs last ${i}`,icon:e.jsx(E,{className:"w-5 h-5 text-primary"})},{label:"Average ROAS",value:`${((s==null?void 0:s.kpis.roas)??0).toFixed(2)}x`,change:N(s==null?void 0:s.kpis.roasChangePct,"%"),isPositive:((s==null?void 0:s.kpis.roasChangePct)??0)>=0,comparison:`vs last ${i}`,icon:e.jsx(k,{className:"w-5 h-5 text-primary"})},{label:"Active Campaigns",value:G((s==null?void 0:s.kpis.activeCampaigns)??0),change:s!=null&&s.kpis.activeCampaigns?`+${s.kpis.activeCampaigns}`:"—",isPositive:!0,comparison:`vs last ${i}`,icon:e.jsx(T,{className:"w-5 h-5 text-primary"})}],f=(s==null?void 0:s.topCampaign)??{name:"No campaigns yet",roas:0,spend:0,revenue:0},g=(s==null?void 0:s.bestCreative)??{name:"Connect Meta to generate creatives",aiScore:0,ctr:0,conversions:0},y=($=(R=s==null?void 0:s.onboarding)==null?void 0:R.steps)==null?void 0:$.find(r=>r.id==="connect-meta"),x=!!(y!=null&&y.completed),z=[{id:"meta-connect",title:x?"Meta connected":"Connect Meta Ads",description:x?"Your account is linked. Sync fresh performance data now.":"Unlock live campaign metrics and ROAS tracking in minutes.",priority:x?"low":"high",cta:x?"Sync now":"Connect",icon:e.jsx(T,{className:"w-5 h-5 text-primary"}),onClick:()=>x?t("settings",{tab:"integrations"}):t("settings",{tab:"integrations"})},{id:"creative-run",title:"Generate new creatives",description:"Launch 3 fresh ad variations to fight creative fatigue.",priority:"medium",cta:"Open builder",icon:e.jsx(ee,{className:"w-5 h-5 text-primary"}),onClick:()=>t("creative-builder")},{id:"campaign-review",title:"Review top campaigns",description:"Spot winners and scale budgets with confidence.",priority:"medium",cta:"View campaigns",icon:e.jsx(k,{className:"w-5 h-5 text-primary"}),onClick:()=>t("campaigns")}],_=3.5,S=6e3,A=18e3,V=Math.min(100,((s==null?void 0:s.kpis.spend)??0)/S*100),U=Math.min(100,((s==null?void 0:s.kpis.revenue)??0)/A*100),B=Math.min(100,((s==null?void 0:s.kpis.roas)??0)/_*100);return e.jsxs(te,{children:[e.jsx(ie,{title:"Overview",subtitle:"Here's what's happening with your campaigns today",chips:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(C,{children:x?"Meta connected":"Meta not connected"}),e.jsxs(C,{children:["Range: ",i]}),e.jsxs(C,{children:["Channel: ",c]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:i,onChange:r=>j(r.target.value),className:"appearance-none pl-3 pr-8 py-2 bg-card border border-border rounded-lg text-sm font-medium text-foreground focus:outline-none focus:ring-2 focus:ring-primary/50 cursor-pointer active:scale-[0.98] transition-transform",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"})]}),e.jsx(D,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:c,onChange:r=>v(r.target.value),className:"appearance-none pl-3 pr-8 py-2 bg-card border border-border rounded-lg text-sm font-medium text-foreground focus:outline-none focus:ring-2 focus:ring-primary/50 cursor-pointer active:scale-[0.98] transition-transform",children:[e.jsx("option",{value:"meta",children:"Meta Ads"}),e.jsx("option",{value:"google",children:"Google Ads"}),e.jsx("option",{value:"tiktok",children:"TikTok Ads"})]}),e.jsx(D,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5",children:H.map((r,p)=>e.jsxs(ne,{className:"p-5 hover:-translate-y-0.5 transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-[2px] rounded-t-xl bg-primary/40"}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:r.label}),e.jsx("div",{className:"text-2xl sm:text-3xl font-semibold tracking-tight text-foreground mb-2",children:r.value}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:`flex items-center gap-1 font-medium ${r.isPositive?"text-green-600":"text-muted-foreground"}`,children:[r.isPositive?e.jsx(E,{className:"w-3 h-3"}):e.jsx(W,{className:"w-3 h-3"}),r.change]}),e.jsx("span",{className:"text-muted-foreground",children:r.comparison})]})]}),e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 border border-primary/15 flex items-center justify-center shrink-0",children:r.icon})]})]},p))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-5 mb-6 sm:mb-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(a.Suspense,{fallback:e.jsx(I,{title:"Loading spend vs revenue"}),children:e.jsx(oe,{points:(s==null?void 0:s.timeseries)??[],range:i,loading:u,error:m})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(a.Suspense,{fallback:e.jsx(I,{title:"Loading ROAS trend"}),children:e.jsx(le,{points:((s==null?void 0:s.timeseries)??[]).map(r=>({ts:r.ts,roas:r.roas})),range:i,loading:u,error:m})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-5 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"rounded-2xl bg-card/70 backdrop-blur border border-border/50 shadow-[0_1px_0_rgba(255,255,255,0.5),0_12px_30px_rgba(0,0,0,0.06)] p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold tracking-tight text-foreground mb-1",children:"Action Center"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Focused next steps to improve results"})]}),e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 border border-primary/15 flex items-center justify-center",children:e.jsx(Y,{className:"w-5 h-5 text-primary"})})]}),e.jsx("div",{className:"space-y-3",children:z.map(r=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 rounded-xl border border-border/60 bg-background/70 p-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 border border-primary/15 flex items-center justify-center",children:r.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:r.title}),e.jsx("span",{className:`rounded-full px-2 py-0.5 text-[10px] font-semibold uppercase ${r.priority==="high"?"bg-red-500/10 text-red-500 border border-red-500/20":r.priority==="medium"?"bg-amber-500/10 text-amber-500 border border-amber-500/20":"bg-green-500/10 text-green-500 border border-green-500/20"}`,children:r.priority})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]})]}),e.jsx("button",{onClick:r.onClick,className:"w-full sm:w-auto px-3 py-2 bg-muted hover:bg-muted/80 border border-border text-xs font-semibold rounded-lg transition-all",children:r.cta})]},r.id))})]}),e.jsxs("div",{className:"rounded-2xl bg-card/70 backdrop-blur border border-border/50 shadow-[0_1px_0_rgba(255,255,255,0.5),0_12px_30px_rgba(0,0,0,0.06)] p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold tracking-tight text-foreground mb-1",children:"Goals & Guardrails"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay within budget and hit your ROAS target"})]}),e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 border border-primary/15 flex items-center justify-center",children:e.jsx(Z,{className:"w-5 h-5 text-primary"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[e.jsx("span",{className:"text-muted-foreground",children:"ROAS target"}),e.jsxs("span",{className:"font-semibold text-foreground",children:[((s==null?void 0:s.kpis.roas)??0).toFixed(2),"x / ",_.toFixed(1),"x"]})]}),e.jsx("div",{className:"h-2 rounded-full bg-muted overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary",style:{width:`${B}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[e.jsx("span",{className:"text-muted-foreground",children:"Spend cap"}),e.jsxs("span",{className:"font-semibold text-foreground",children:[n((s==null?void 0:s.kpis.spend)??0)," / ",n(S)]})]}),e.jsx("div",{className:"h-2 rounded-full bg-muted overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500",style:{width:`${V}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[e.jsx("span",{className:"text-muted-foreground",children:"Revenue goal"}),e.jsxs("span",{className:"font-semibold text-foreground",children:[n((s==null?void 0:s.kpis.revenue)??0)," / ",n(A)]})]}),e.jsx("div",{className:"h-2 rounded-full bg-muted overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${U}%`}})})]}),e.jsx("button",{onClick:()=>se.info("Goal settings coming soon"),className:"w-full px-3 py-2 bg-background hover:bg-muted border border-border text-xs font-semibold rounded-lg transition-all",children:"Edit goals"})]})]})]}),e.jsxs("div",{className:"rounded-2xl bg-card/70 backdrop-blur border border-border/50 shadow-[0_1px_0_rgba(255,255,255,0.5),0_12px_30px_rgba(0,0,0,0.06)] hover:shadow-[0_1px_0_rgba(255,255,255,0.6),0_18px_50px_rgba(0,0,0,0.10)] transition-all duration-300 p-6 sm:p-8 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold tracking-tight text-foreground mb-1",children:"Getting Started"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Unlock the full power in 5 minutes"})]}),e.jsxs("div",{className:"text-sm font-medium text-muted-foreground whitespace-nowrap",children:[b,"/",d]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden mb-6",children:e.jsx("div",{className:"h-full bg-primary/80 transition-all duration-500",style:{width:`${o}%`}})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:l.map(r=>e.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl border transition-all duration-300 hover:-translate-y-0.5 ${r.completed?"bg-muted/30 border-border/50":"bg-background border-border hover:border-border/80"}`,children:[e.jsx("div",{className:"pt-0.5 shrink-0",children:r.completed?e.jsx(q,{className:"w-5 h-5 text-green-600"}):e.jsx(Q,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`font-semibold tracking-tight mb-0.5 ${r.completed?"text-muted-foreground line-through":"text-foreground"}`,children:r.title}),e.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:r.description}),!r.completed&&e.jsx("button",{onClick:r.onAction,className:"w-full px-3 py-1.5 bg-background hover:bg-muted border border-border text-foreground text-xs font-medium rounded-lg transition-all active:scale-[0.98]",children:r.actionLabel})]})]},r.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-5",children:[e.jsxs("div",{className:"rounded-2xl bg-card/70 backdrop-blur border border-border/50 shadow-[0_1px_0_rgba(255,255,255,0.5),0_12px_30px_rgba(0,0,0,0.06)] hover:shadow-[0_1px_0_rgba(255,255,255,0.6),0_18px_50px_rgba(0,0,0,0.10)] transition-all duration-300 hover:-translate-y-0.5 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-semibold tracking-tight text-foreground mb-1",children:"Top Performing Campaign Today"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest ROAS in the last 24 hours"})]}),e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 border border-primary/15 flex items-center justify-center shrink-0",children:e.jsx(k,{className:"w-5 h-5 text-primary"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold tracking-tight text-foreground mb-2",children:f.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-green-500/10 text-green-600 border border-green-500/20 font-medium",children:"Top performer"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"High confidence"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[e.jsxs("span",{className:"text-muted-foreground",children:["ROAS:"," ",e.jsxs("span",{className:"font-semibold tracking-tight text-foreground",children:[f.roas,"x"]})]}),e.jsxs("span",{className:"text-muted-foreground",children:["Spend:"," ",e.jsxs("span",{className:"font-mono text-foreground",children:["€",(f.spend/1e3).toFixed(1),"K"]})]}),e.jsxs("span",{className:"text-muted-foreground",children:["Revenue:"," ",e.jsxs("span",{className:"font-mono text-foreground",children:["€",(f.revenue/1e3).toFixed(1),"K"]})]})]})]}),e.jsxs("button",{onClick:()=>t("campaigns"),className:"inline-flex items-center gap-2 text-sm font-medium text-primary hover:text-primary/80 transition-colors",children:["View all campaigns",e.jsx(O,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{className:"rounded-2xl bg-card/70 backdrop-blur border border-border/50 shadow-[0_1px_0_rgba(255,255,255,0.5),0_12px_30px_rgba(0,0,0,0.06)] hover:shadow-[0_1px_0_rgba(255,255,255,0.6),0_18px_50px_rgba(0,0,0,0.10)] transition-all duration-300 hover:-translate-y-0.5 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-semibold tracking-tight text-foreground mb-1",children:"Best Creative (AI Score)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest AI performance score"})]}),e.jsx("div",{className:"h-10 w-10 rounded-xl bg-primary/10 border border-primary/15 flex items-center justify-center shrink-0",children:e.jsx(X,{className:"w-5 h-5 text-primary"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold tracking-tight text-foreground mb-2",children:g.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-primary/10 text-primary border border-primary/15 font-medium",children:"AI insight"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"High confidence"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[e.jsx("span",{className:"text-muted-foreground",children:"Performance Score"}),e.jsxs("span",{className:"font-semibold tracking-tight text-primary",children:[g.aiScore,"/100"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-500",style:{width:`${g.aiScore}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[e.jsxs("span",{className:"text-muted-foreground",children:["CTR:"," ",e.jsxs("span",{className:"font-mono text-foreground",children:[g.ctr,"%"]})]}),e.jsxs("span",{className:"text-muted-foreground",children:["Conv:"," ",e.jsx("span",{className:"font-mono text-foreground",children:g.conversions})]})]})]}),e.jsxs("button",{onClick:()=>t("analytics"),className:"inline-flex items-center gap-2 text-sm font-medium text-primary hover:text-primary/80 transition-colors",children:["View analytics",e.jsx(O,{className:"w-4 h-4"})]})]})]})]})]})}export{ve as OverviewPage};

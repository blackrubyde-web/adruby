import{r as s,j as e,D as k,aD as H,bd as E,aA as Y,bo as q,aO as G,aB as D,k as L,ar as Z,aF as F,bp as W,bq as $,br as U,ac as ee,bs as se,aV as O,ay as z}from"./vendor-react-BtVdps6C.js";import{s as J,u as te}from"./creative-C4rWjoa1.js";import{a as re}from"./apiClient-Xod5JFW7.js";import"./vendor-Cwcl6ryW.js";import"./vendor-radix-BA32w1ww.js";import"./vendor-supabase-CX3WxO18.js";function me({onGoogleLogin:j,onEmailLogin:x,onNavigateToRegister:d,onForgotPassword:o,authError:i,isAuthReady:c=!0}){const[l,N]=s.useState(""),[n,f]=s.useState(""),[p,m]=s.useState(!1),[g,v]=s.useState(!1),[y,b]=s.useState(""),C=y||i||"",r=g||!c,u=async t=>{if(t.preventDefault(),b(""),v(!0),!l||!n){b("Please enter both email and password"),v(!1);return}try{await x(l,n)}catch{b("Invalid email or password")}finally{v(!1)}};return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background px-4 py-12",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-red-600 flex items-center justify-center",children:e.jsx(k,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"font-bold text-2xl",children:"AdRuby"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Welcome back"}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to your account to continue"})]}),C&&e.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-600",children:"Error"}),e.jsx("p",{className:"text-sm text-red-600/80",children:C})]})]}),e.jsxs("button",{onClick:j,disabled:r,className:"w-full py-3 border-2 border-border rounded-xl font-medium hover:bg-accent transition-colors flex items-center justify-center gap-3 mb-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-card text-muted-foreground",children:"Or continue with email"})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"w-5 h-5 text-muted-foreground absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{id:"email",type:"email",value:l,onChange:t=>N(t.target.value),placeholder:"you@example.com",disabled:r,className:"w-full pl-11 pr-4 py-3 bg-background border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all disabled:opacity-50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"w-5 h-5 text-muted-foreground absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{id:"password",type:p?"text":"password",value:n,onChange:t=>f(t.target.value),placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",disabled:r,className:"w-full pl-11 pr-12 py-3 bg-background border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all disabled:opacity-50"}),e.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:p?e.jsx(q,{className:"w-5 h-5"}):e.jsx(G,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"button",onClick:()=>o(l),className:"text-sm text-primary hover:underline",children:"Forgot password?"})}),e.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 bg-primary text-white rounded-xl font-semibold hover:bg-primary/90 transition-all hover:scale-[1.02] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:["Sign In",e.jsx(D,{className:"w-5 h-5"})]})})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",e.jsx("button",{onClick:d,className:"text-primary font-medium hover:underline",children:"Start free trial"})]})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-6 text-xs text-muted-foreground",children:[e.jsx("span",{children:"üîí Secure login"}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:"GDPR compliant"})]})]})})}const S="ad_ruby_registration_draft",ae="adruby_hold_auth_redirect";function xe({onGoogleRegister:j,onEmailRegister:x,onNavigateToLogin:d,onProceedToPayment:o}){const[i,c]=s.useState(""),[l,N]=s.useState(""),[n,f]=s.useState(""),[p,m]=s.useState(!1),[g,v]=s.useState(!1),[y,b]=s.useState(!1),[C,r]=s.useState(""),[u,t]=s.useState(null),[P,A]=s.useState(!1),[w,I]=s.useState("idle"),[_,M]=s.useState(5),[R,B]=s.useState(!1);s.useEffect(()=>{const a=localStorage.getItem(S);if(a)try{const h=JSON.parse(a);(h!=null&&h.name||h!=null&&h.email)&&(t(h),A(!0))}catch{localStorage.removeItem(S)}},[]),s.useEffect(()=>{if(!i&&!l){localStorage.removeItem(S);return}const a={name:i,email:l,acceptTerms:g,updatedAt:new Date().toISOString()};localStorage.setItem(S,JSON.stringify(a))},[g,l,i]),s.useEffect(()=>{if(w!=="success"||R)return;if(_<=0){o();return}const a=window.setTimeout(()=>{M(h=>h-1)},1e3);return()=>window.clearTimeout(a)},[o,R,_,w]);const V=async a=>{if(a.preventDefault(),r(""),b(!0),!i||!l||!n){r("Please fill in all fields"),b(!1);return}if(n.length<8){r("Password must be at least 8 characters"),b(!1);return}if(!g){r("Please accept the terms and conditions"),b(!1);return}try{if(await x(i,l,n)==="signed_in"){I("success"),M(5),B(!1),localStorage.removeItem(S);try{sessionStorage.setItem(ae,"1")}catch{}}else I("needs_confirmation")}catch{r("Registration failed. Please try again.")}finally{b(!1)}},K=["Unlimited AI ad creatives","1,000 credits to start","Real-time analytics","Multi-platform support","Advanced targeting","Priority support"],X=()=>{u&&(c(u.name||""),N(u.email||""),v(!!u.acceptTerms),A(!1))},Q=()=>{localStorage.removeItem(S),t(null),A(!1)},T=[{id:1,label:"Account"},{id:2,label:"Business"},{id:3,label:"Checkout"}];return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background px-4 py-12",children:e.jsx("div",{className:"w-full max-w-6xl",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-red-600 flex items-center justify-center",children:e.jsx(k,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"font-bold text-2xl",children:"AdRuby"})]}),e.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["Start your",e.jsx("br",{}),e.jsx("span",{className:"text-primary",children:"7-day free trial"})]}),e.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"Join 50,000+ marketing professionals creating high-converting Facebook Ads with AI."}),e.jsx("div",{className:"space-y-4",children:K.map((a,h)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(L,{className:"w-4 h-4 text-primary"})}),e.jsx("span",{className:"text-foreground",children:a})]},h))}),e.jsx("div",{className:"mt-8 p-4 bg-muted/50 border border-border rounded-xl",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["üí≥ No credit card required for trial",e.jsx("br",{}),"üîí Enterprise-grade security",e.jsx("br",{}),"‚ú® Cancel anytime, no questions asked"]})})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-card border border-border rounded-2xl p-8 shadow-xl",children:[e.jsxs("div",{className:"lg:hidden flex items-center justify-center gap-2 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-red-600 flex items-center justify-center",children:e.jsx(k,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"font-bold text-2xl",children:"AdRuby"})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Create your account"}),e.jsx("p",{className:"text-muted-foreground",children:"Start your free trial today"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center justify-center gap-3",children:T.map((a,h)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-9 h-9 rounded-full border-2 flex items-center justify-center text-sm font-semibold ${a.id===1?"bg-primary text-primary-foreground border-primary":"border-border text-muted-foreground"}`,children:a.id}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.label}),h<T.length-1&&e.jsx("div",{className:"w-8 h-px bg-border"})]},a.id))}),e.jsx("p",{className:"mt-3 text-xs text-muted-foreground text-center",children:"Step 1 of 3"})]}),w==="success"&&e.jsx("div",{className:"mb-6 p-5 border border-green-500/20 bg-green-500/10 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx(L,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Account created"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your account is ready. Continue to checkout to activate your plan."}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:o,className:"px-4 py-2.5 bg-primary text-primary-foreground rounded-xl font-semibold",children:"Continue to payment"}),e.jsx("button",{onClick:()=>B(!0),className:"px-4 py-2.5 bg-muted hover:bg-muted/80 rounded-xl font-semibold",children:R?"Auto-redirect cancelled":"Cancel auto-redirect"})]}),!R&&e.jsxs("p",{className:"mt-3 text-xs text-muted-foreground",children:["Redirecting in ",_,"s..."]})]})]})}),w==="needs_confirmation"&&e.jsx("div",{className:"mb-6 p-5 border border-border bg-muted/30 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(E,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Confirm your email"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["We sent a confirmation link to ",l||"your email",". Please verify, then sign in."]}),e.jsx("button",{onClick:d,className:"mt-4 px-4 py-2.5 bg-primary text-primary-foreground rounded-xl font-semibold",children:"Go to login"})]})]})}),C&&w==="idle"&&e.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-600",children:"Error"}),e.jsx("p",{className:"text-sm text-red-600/80",children:C})]})]}),P&&w==="idle"&&e.jsxs("div",{className:"mb-6 p-4 bg-muted/40 border border-border rounded-xl flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-foreground",children:"Resume your draft?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"We found an unfinished signup. Pick up where you left off."}),e.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{onClick:X,className:"px-3 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-semibold",children:"Resume draft"}),e.jsx("button",{onClick:Q,className:"px-3 py-2 bg-muted hover:bg-muted/80 rounded-lg text-sm font-semibold",children:"Start fresh"})]})]})]}),w==="idle"&&e.jsxs("button",{onClick:j,disabled:y,className:"w-full py-3 border-2 border-border rounded-xl font-medium hover:bg-accent transition-colors flex items-center justify-center gap-3 mb-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign up with Google"]}),w==="idle"&&e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-card text-muted-foreground",children:"Or sign up with email"})})]}),w==="idle"&&e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"w-5 h-5 text-muted-foreground absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{id:"name",type:"text",value:i,onChange:a=>c(a.target.value),placeholder:"John Doe",disabled:y,className:"w-full pl-11 pr-4 py-3 bg-background border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all disabled:opacity-50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"w-5 h-5 text-muted-foreground absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{id:"email",type:"email",value:l,onChange:a=>N(a.target.value),placeholder:"you@example.com",disabled:y,className:"w-full pl-11 pr-4 py-3 bg-background border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all disabled:opacity-50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"w-5 h-5 text-muted-foreground absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{id:"password",type:p?"text":"password",value:n,onChange:a=>f(a.target.value),placeholder:"At least 8 characters",disabled:y,className:"w-full pl-11 pr-12 py-3 bg-background border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all disabled:opacity-50"}),e.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:p?e.jsx(q,{className:"w-5 h-5"}):e.jsx(G,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{id:"terms",type:"checkbox",checked:g,onChange:a=>v(a.target.checked),className:"mt-1 w-4 h-4 rounded border-border text-primary focus:ring-2 focus:ring-primary/50"}),e.jsxs("label",{htmlFor:"terms",className:"text-sm text-muted-foreground",children:["I agree to the"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Privacy Policy"})]})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full py-3 bg-primary text-white rounded-xl font-semibold hover:bg-primary/90 transition-all hover:scale-[1.02] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Creating account..."]}):e.jsxs(e.Fragment,{children:["Start Free Trial",e.jsx(D,{className:"w-5 h-5"})]})})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx("button",{onClick:d,className:"text-primary font-medium hover:underline",children:"Sign in"})]})]})})]})})})}function ue({message:j="Logging you in...",onComplete:x}){const[d,o]=s.useState(0),[i,c]=s.useState(!1),[l,N]=s.useState(null);return s.useEffect(()=>{let n=!0,f=0;const p=25,m=setInterval(async()=>{f+=1,o(g=>Math.min(90,g+2));try{const{data:g}=await J.auth.getSession();if(!n)return;if(g.session){clearInterval(m),o(100),c(!0),x&&setTimeout(x,500);return}f>=p&&(clearInterval(m),N("Could not verify your session. Please try again."))}catch{if(!n)return;clearInterval(m),N("Auth check failed. Please try again.")}},400);return()=>{n=!1,clearInterval(m)}},[x]),e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background px-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-12",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary to-red-600 flex items-center justify-center",children:e.jsx(k,{className:"w-7 h-7 text-white"})}),e.jsx("span",{className:"font-bold text-2xl",children:"AdRuby"})]}),e.jsx("div",{className:"mb-8 flex items-center justify-center",children:i?e.jsx(F,{className:"w-16 h-16 text-green-600 animate-pulse"}):e.jsx(W,{className:"w-16 h-16 text-primary animate-spin"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:l?"Error":i?"Success!":j}),e.jsx("p",{className:"text-muted-foreground mb-8",children:l||(i?"Redirecting you to your dashboard...":"Please wait while we set up your session")}),e.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-red-600 transition-all duration-300 ease-out",style:{width:`${d}%`}})}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-3",children:[d,"%"]})]})]})})}function he({sessionId:j,onVerificationSuccess:x,onVerificationError:d,onGoHome:o,onLogout:i}){const[c,l]=s.useState("loading"),[N,n]=s.useState("Verifying your payment..."),{user:f,refreshProfile:p}=te();return s.useEffect(()=>{let m=!1;const g=r=>new Promise(u=>setTimeout(u,r)),v=j??new URLSearchParams(window.location.search).get("session_id")??void 0,y=async()=>{if(!(f!=null&&f.id))return!1;try{const{data:r,error:u}=await J.from("user_profiles").select("payment_verified,onboarding_completed,trial_status,trial_expires_at,trial_ends_at").eq("id",f.id).single();if(u)return!1;const t=r,P=(t==null?void 0:t.trial_expires_at)||(t==null?void 0:t.trial_ends_at)||null,A=(t==null?void 0:t.trial_status)==="active"&&P?new Date(P).getTime()>Date.now():!1;return!!(t!=null&&t.payment_verified||t!=null&&t.onboarding_completed||A)}catch{return!1}},b=r=>{m||(l("error"),n(r),d==null||d())};return(async()=>{try{if(!v){if(n("Checking your account status..."),!await y()){b(f?"Payment required. Start checkout in Billing.":"Login required to verify billing.");return}m||(l("success"),n("Account verified!")),await p().catch(()=>{}),setTimeout(()=>!m&&x(),800);return}if(!f){b("Login required to verify billing.");return}n("Verifying your payment with Stripe...");let r=!1;for(let u=0;u<8;u+=1){const t=await re.post("/api/verify-checkout-session",{sessionId:v});if(r=!!(t!=null&&t.ok),r)break;if(m)return;n("Payment pending... waiting for confirmation"),await g(2e3)}if(!r&&!await y()){b("Payment verification failed or is still pending. Please refresh in a moment.");return}m||(l("success"),n("Payment verified successfully!")),await p().catch(()=>{}),setTimeout(()=>!m&&x(),1200)}catch(r){b(r instanceof Error?r.message:"Payment verification failed")}})(),()=>{m=!0}},[j,f,p,x,d]),e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background px-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-12",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary to-red-600 flex items-center justify-center",children:e.jsx(k,{className:"w-7 h-7 text-white"})}),e.jsx("span",{className:"font-bold text-2xl",children:"AdRuby"})]}),e.jsxs("div",{className:"mb-8 flex items-center justify-center",children:[c==="loading"&&e.jsx(W,{className:"w-16 h-16 text-primary animate-spin"}),c==="success"&&e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"w-16 h-16 text-green-600 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-green-600/20 rounded-full animate-ping"})]}),c==="error"&&e.jsx($,{className:"w-16 h-16 text-red-600 animate-pulse"})]}),e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:[c==="loading"&&"Verifying Payment",c==="success"&&"Verification Complete!",c==="error"&&"Verification Failed"]}),e.jsx("p",{className:"text-muted-foreground mb-8",children:N}),c==="loading"&&e.jsx("div",{className:"w-full max-w-xs mx-auto",children:e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-red-600 rounded-full animate-pulse"})})}),c==="error"&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 mt-8",children:[o&&e.jsxs("button",{onClick:o,className:"w-full sm:w-auto px-6 py-3 border-2 border-border rounded-xl font-medium hover:bg-accent transition-colors flex items-center justify-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),"Go Home"]}),i&&e.jsxs("button",{onClick:i,className:"w-full sm:w-auto px-6 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"}),"Logout"]})]}),c==="success"&&e.jsx("div",{className:"mt-8 p-4 bg-green-500/10 border border-green-500/20 rounded-xl",children:e.jsx("p",{className:"text-sm text-green-600",children:"Redirecting you to your dashboard..."})})]})})}function fe({onGoToDashboard:j}){const[x,d]=s.useState(!1);return s.useEffect(()=>{d(!0);const o=setTimeout(()=>d(!1),3e3);return()=>clearTimeout(o)},[]),e.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-background px-4 relative overflow-hidden",children:[x&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:50}).map((o,i)=>e.jsx("div",{className:"absolute w-2 h-2 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`-${Math.random()*20}%`,backgroundColor:["#C80000","#FF6B6B","#4ECDC4","#FFD93D","#A8E6CF"][Math.floor(Math.random()*5)],animationDelay:`${Math.random()*2}s`,animationDuration:`${3+Math.random()*2}s`}},i))})}),e.jsxs("div",{className:"text-center max-w-2xl relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-12",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary to-red-600 flex items-center justify-center",children:e.jsx(k,{className:"w-7 h-7 text-white"})}),e.jsx("span",{className:"font-bold text-2xl",children:"AdRuby"})]}),e.jsx("div",{className:"mb-8 flex items-center justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"w-20 h-20 text-green-600 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-green-600/20 rounded-full animate-ping"}),e.jsx(se,{className:"w-8 h-8 text-yellow-500 absolute -top-4 -right-4 animate-bounce"})]})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4",children:"Payment Successful! üéâ"}),e.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Welcome to AdRuby! Your account is now active and ready to use."}),e.jsxs("div",{className:"bg-gradient-to-br from-primary/10 via-purple-500/10 to-blue-500/10 border border-border rounded-2xl p-8 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"What's included in your plan:"}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-4 text-left",children:["Unlimited AI ad creatives","1,000 credits to start","Real-time analytics","Multi-platform support","Advanced targeting","Priority support"].map((o,i)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-600/10 flex items-center justify-center flex-shrink-0",children:e.jsx(F,{className:"w-4 h-4 text-green-600"})}),e.jsx("span",{className:"text-sm text-foreground",children:o})]},i))})]}),e.jsxs("button",{onClick:j,className:"px-8 py-4 bg-primary text-white rounded-xl font-semibold hover:bg-primary/90 transition-all hover:scale-105 flex items-center justify-center gap-2 mx-auto shadow-lg shadow-primary/25",children:["Go to Dashboard",e.jsx(D,{className:"w-5 h-5"})]}),e.jsxs("p",{className:"mt-8 text-sm text-muted-foreground",children:["A receipt has been sent to your email address.",e.jsx("br",{}),"Need help? Contact us at"," ",e.jsx("a",{href:"mailto:support@adruby.ai",className:"text-primary hover:underline",children:"support@adruby.ai"})]})]}),e.jsx("style",{children:`
        @keyframes float {
          0% {
            transform: translateY(0) rotate(0deg);
            opacity: 1;
          }
          100% {
            transform: translateY(100vh) rotate(360deg);
            opacity: 0;
          }
        }
        .animate-float {
          animation: float linear infinite;
        }
      `})]})}function be({onRetryCheckout:j,onViewPricing:x,onGoHome:d}){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background px-4",children:e.jsxs("div",{className:"text-center max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-12",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary to-red-600 flex items-center justify-center",children:e.jsx(k,{className:"w-7 h-7 text-white"})}),e.jsx("span",{className:"font-bold text-2xl",children:"AdRuby"})]}),e.jsx("div",{className:"mb-8 flex items-center justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"w-20 h-20 text-yellow-600 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-yellow-600/20 rounded-full animate-pulse"})]})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4",children:"Checkout Cancelled"}),e.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"No worries! Your payment was not processed. You can try again or explore our pricing options."}),e.jsxs("div",{className:"bg-muted/30 border border-border rounded-2xl p-8 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Why subscribe to AdRuby?"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-6 text-left",children:[e.jsxs("div",{children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center mb-3",children:e.jsx(k,{className:"w-5 h-5 text-primary"})}),e.jsx("h4",{className:"font-semibold mb-2",children:"AI-Powered Creatives"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate high-converting ad creatives in seconds with advanced AI."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center mb-3",children:e.jsx(O,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h4",{className:"font-semibold mb-2",children:"Maximize ROI"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time optimization to increase ROAS and reduce ad spend waste."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/10 flex items-center justify-center mb-3",children:e.jsx(z,{className:"w-5 h-5 text-green-600"})}),e.jsx("h4",{className:"font-semibold mb-2",children:"7-Day Free Trial"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try all features risk-free. Cancel anytime during the trial period."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/10 flex items-center justify-center mb-3",children:e.jsx(U,{className:"w-5 h-5 text-purple-600"})}),e.jsx("h4",{className:"font-semibold mb-2",children:"Enterprise Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get priority support from our team of ad experts."})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("button",{onClick:j,className:"w-full sm:w-auto px-8 py-4 bg-primary text-white rounded-xl font-semibold hover:bg-primary/90 transition-all hover:scale-105 flex items-center justify-center gap-2 shadow-lg shadow-primary/25",children:[e.jsx(z,{className:"w-5 h-5"}),"Retry Checkout"]}),e.jsxs("button",{onClick:x,className:"w-full sm:w-auto px-8 py-4 border-2 border-border rounded-xl font-semibold hover:bg-accent transition-colors flex items-center justify-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"View Pricing"]})]}),e.jsx("div",{className:"mt-8",children:e.jsx("button",{onClick:d,className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"‚Üê Back to home"})}),e.jsxs("p",{className:"mt-12 text-sm text-muted-foreground",children:["Need help?"," ",e.jsx("a",{href:"mailto:support@adruby.ai",className:"text-primary hover:underline",children:"Contact our support team"})]})]})})}export{ue as AuthProcessingPage,me as LoginPage,be as PaymentCancelledPage,fe as PaymentSuccessPage,he as PaymentVerificationPage,xe as RegisterPage};
